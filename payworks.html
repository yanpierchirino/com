<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>
<body>
	<script src="https://multicobros.banorte.com/orquestador/resources/js/jquery-3.3.1.js" type="text/javascript"></script>
	<script src="https://multicobros.banorte.com/orquestador/lightbox/checkout.js" type="text/javascript"></script>
	<script>
		// Como primer paso, se realiza el llamado del ambiente donde se ejecutarán las operaciones.
		Payment.setEnv ("pro");
		// dev , int, pre, pro
		// Como segundo paso, se crea una variable, que contendrá la información encriptada de los datos del comercio, compra y cliente.
		var xObjEnc;

		// Como tercer paso, se invoca la función Payment.encrypt dentro de un evento “click” del elemento Botón, donde se inicializará el proceso de llamado al aplicativo de pagos, esta función será la encargada de realizar la recepción de los parámetros (objeto params) para inicializar la aplicación, y a su vez, la encriptación de los mismos, este resultado, será guardado en la variable que declarada previamente (xObjEnc).

		//Información Obligatoria
		$("#MyButton").click(function () {
			xObjEnc = Payment.encrypt({
	   			params: {
					MerchantID: 8808379,
					User: 'odoovvnd',
					Password: 'VndOd0#06!',
					Mode: 'AUT',
					ControlNumber: 'REF-1',
					TerminalID: '88083791',
					Amount: 1.00,
					MerchantName: 'VVND VIVENCIAS UNICAS',
					MerchantCity: 'Mazatlan',
					Language: 'ES',
				}
			});

			// Como cuarto paso, se invoca la función Payment.startPayment, donde se inicializará el proceso de pago, esta función será la encargada de realizar la recepción del objeto encriptado que contiene la información de los datos del comercio, compra y cliente, posterior, enviarlo dentro de un objeto crypto. Al implementar la función, se tienen que tener implementados los 4 eventos para controlar los eventos de éxito (onSuccess), cancelación (onCancel) de la operación y cerrado del lightbox(onClosed).
	        Payment.startPayment({
	            params: {
	                crypt: xObjEnc
				},
				onClosed: function(response) {
		        	console.log("onClosed");
		        	console.log(response);
		            // TO DO Code Here when close the modal
		        },
		        onError: function(response) {
		        	console.log("onError");
		        	console.log(response);
		        // TO DO Code Here when an error occurred
		        },
		        onSuccess: function(response) {
		        	console.log("onSuccess");
		        	console.log(response);
		                // TO DO Code Here when operation is successful
		        },
		        onCancel: function(response) {
		        	console.log("onCancel");
		        	console.log(response);
		        // TO DO Code Here when user cancel operation
		        }
			});
		});
	</script>
</body>
</html>